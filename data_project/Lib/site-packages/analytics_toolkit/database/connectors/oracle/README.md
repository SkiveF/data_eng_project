# Catalina - Oracle connector

## Description

This connector allows to read and write tables on Oracle efficiently and seamlessly. Oracle
databases are read-only, so the writing methods will not work.

## Installation

For usage locally, you need to:

- Install the Oracle Client Tools
[here](https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html).
  - The "Basic Light Package" is enough.
- Unzip the folder to the location you want. %HOMEPATH%/oracle/ is a good one.
- Add the path to the folder to the PATH environment variable (for your account is enough)

More information on the Oracle Client installation locally and on the VMs [here](https://cx-oracle.readthedocs.io/en/latest/user_guide/installation.html#oracle-instant-client-zip-files).

## Authentication

To use the connector, you can either :

1. [OPTIMAL] Add the ORACLE_USERNAME / ORACLE_PASSWORD environment variables.
2. [NOT ADVISED] Input your username / password as parameters in the creation of the connector.

To add environment variables, follow this
[link](https://promotastic.atlassian.net/wiki/spaces/DDIM/pages/2969764114/How-to+passwords+for+the+analytics-toolkit+on+VMs).

## Usage examples

````python
from analytics_toolkit.database.connectors import OracleDatabaseConnector

# Choose parameters for your Oracle account
oracle = OracleDatabaseConnector(database="POCFR3")

# Inputs that could be used.
schema = "MASTER"
table_name = f"store_t"
schema_table_name = f"{schema}.{table_name}"

# Get a table names
df_table = oracle.get_table_names(table_name, schema=schema)

# Get a table from a table name
df_table = oracle.get_table(schema_table_name)

# Check if a table exists
boolean = oracle.has_table(table_name, schema=schema)

# Get columns of a table
column_list = list(oracle.get_columns(table_name, schema=schema))

# Get data types of a table
column_dtypes = oracle.get_columns(table_name, schema=schema)

# Use the SQLAlchemy engine to do SQLAlchemy stuff
engine = oracle.engine
````

Pros:

- Use many functionalities described in [this tutorial](https://docs.sqlalchemy.org/en/14/orm/tutorial.html) or
  [this one](https://towardsdatascience.com/sqlalchemy-python-tutorial-79a577141a91)

## TO-DO list

Speed up writing on base:

- Modify the insertion method to use

Speed up reading on base:

- Modify pd.read_sql (tutorial [here](https://towardsdatascience.com/optimizing-pandas-read-sql-for-postgres-f31cd7f707ab))
